configure terminal
  log syslog informational
  hostname speaker2

  interface eth1
    ip address 10.2.0.254/16
  interface eth2
    ip address 172.16.0.2/16
  interface eth3
    ip address 172.17.0.2/16
  interface eth4
    ip address 172.18.0.2/16
  exit

  # PROV : {1}
  # PEER : {4}
  # CUST : {3}

  route-map PROV-IN permit 10
    match ip address prefix-list ANY
  route-map PEER-IN permit 10
    match ip address prefix-list ANY
  route-map CUST-IN permit 10
    match ip address prefix-list ANY

  route-map PROV-OUT permit 10
    match ip address prefix-list MY-PFX
  route-map PROV-OUT permit 20
    match ip address prefix-list CUST-PFX
  route-map PEER-OUT permit 10
    match ip address prefix-list MY-PFX
  route-map PEER-OUT permit 20
    match ip address prefix-list CUST-PFX
  route-map CUST-OUT permit 10
    match ip address prefix-list ANY

  ip prefix-list MY-PFX   seq 5 permit 10.2.0.0/16
  ip prefix-list CUST-PFX seq 5 permit 10.3.0.0/16
  ip prefix-list ANY seq 5 permit 0.0.0.0/0 le 32

  router bgp 65002
    no bgp ebgp-requires-policy
    network 10.2.0.0/16
    neighbor 172.16.0.1 remote-as 65001
    neighbor 172.16.0.1 description "AS65001 Speaker"
    neighbor 172.16.0.1 route-map PROV-IN in
    neighbor 172.16.0.1 route-map PROV-OUT out
    neighbor 172.17.0.1 remote-as 65003
    neighbor 172.17.0.1 description "AS65003 Speaker"
    neighbor 172.17.0.1 route-map CUST-IN in
    neighbor 172.17.0.1 route-map CUST-OUT out
    neighbor 172.18.0.1 remote-as 65004
    neighbor 172.18.0.1 description "AS65004 Speaker"
    neighbor 172.18.0.1 route-map PEER-IN in
    neighbor 172.18.0.1 route-map PEER-OUT out